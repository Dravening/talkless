# 链路追踪方案梳理

目前业内方案有四种pinpoint、zipkin、jaeger、skywalking。

> 注意：opentelemetry只是一个标准，并没有提供完整的解决方案，故没有列出

优缺点如下：

| 名称       | 优点                                           | 缺点                                                         |
| ---------- | ---------------------------------------------- | ------------------------------------------------------------ |
| pinpoint   | 稳定、UI界面美观                               | agent对业务性能降低严重，最高达到10%；架构较重；配置较复杂；主要团队面向自身业务进行研发 |
| zipkin     | 轻量，zipkin团队在低采样率的场景下做了大量优化 | 服务拓扑等功能不足                                           |
| jaeger     | 轻量，集成istio                                | agent需要侵入代码，ui界面略显简单                            |
| skywalking | 功能强大，agent部署简单，无代码侵入性          | 架构较重                                                     |

下面给出选型建议：

##### 1.使用istio：

如果客户准备使用istio技术（已与jaeger集成），则无需单独配置链路追踪方案。

优点：省时省力，符合云原生**最佳实践**；

​            自带网络拓扑功能，自带图形化的金丝雀/蓝绿发布功能，使用非常方便。

缺点：istio有网络性能损耗，官方数据是百分之十，实际可能损失更高；
istio会修改k8s准入控制，其维护对运维人员能力有较高要求。

##### 2.使用skywalking，配合skywalking-agent边车

此方案不使用istio，链路追踪方案选用skywalking，agent方案选择边车部署

优点：不需要业务研发人员参与，实施简便。

缺点：需要运维人员对现有部署方案进行调整（加入agent边车）；

​            性能相对sdk方案有所降低。

​            仅支持有限的研发语言（如java）

##### 3.使用skywalking，业务配合使用相应sdk进行打点

此方案不使用istio，链路追踪方案选用skywalking，agent方案选择业务打点

优点：符合可观测体系**最佳实践**，运维人员实施简便，采集性能最佳。

缺点：需要业务研发同事配合，使用相应sdk进行打点。